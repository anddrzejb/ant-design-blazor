@namespace AntDesign
@inherits AntInputComponentBase<(double, double)>
@using Microsoft.AspNetCore.Components.Web

<div class="@ClassMapper.Class" id="@Id" @ref="Ref">
    <div class="ant-multi-range-slider-track ant-multi-range-slider-track-1 @_focusClass" style="@_trackStyle" @onmousedown="@OnRangeItemClick">
    </div>
    @if (Parent.HasTooltip)
    {
        <Tooltip Title="@Parent.TipFormatter(_leftValue)" Style="display: inline;" Visible="_tooltipLeftVisible" ArrowPointAtCenter="true" OverlayClassName="ant-multi-range-slider-tooltip" Placement="@TooltipPlacement" @ref="_toolTipLeft">
            <Unbound>
                <div tabindex="0" 
                     class="ant-multi-range-slider-handle ant-multi-range-slider-handle-1 @_attachedLeftHandleClass" 
                     role="slider" 
                     aria-disabled="@Disabled.ToString()" 
                     aria-valuenow="30" 
                     aria-valuemin="0" 
                     aria-valuemax="100" 
                     style="@(_leftHandleStyle+_focusZIndex)" 
                     @ref="@context.Current" 
                     @onmousedown="e => OnMouseDownEdge(e, false)"
                     @ondblclick="e => OnDoubleClick(1)">@_leftHandleFill
                </div>
            </Unbound>
        </Tooltip>
        <Tooltip Title="@Parent.TipFormatter(_rightValue)" Style="display: inline;" Visible="_tooltipRightVisible" ArrowPointAtCenter="true" OverlayClassName="ant-multi-range-slider-tooltip" Placement="@TooltipPlacement" @ref="_toolTipRight">
            <Unbound>
                <div tabindex="0" 
                     class="ant-multi-range-slider-handle ant-multi-range-slider-handle-2 @_attachedRightHandleClass" 
                     role="slider" 
                     aria-disabled="@Disabled.ToString()" 
                     aria-valuenow="30" 
                     aria-valuemin="0" 
                     aria-valuemax="100" 
                     style="@(_rightHandleStyle+_focusZIndex)" 
                     @ref="@context.Current" 
                     @onmousedown="e => OnMouseDownEdge(e, true)"
                     @ondblclick="e => OnDoubleClick(2)">@_rightHandleFill
                </div>
            </Unbound>
        </Tooltip>
    }
    else
    {
        <div tabindex="0" 
             class="ant-multi-range-slider-handle ant-multi-range-slider-handle-1 @_attachedLeftHandleClass" 
             role="slider" 
             aria-disabled="@Disabled.ToString()" 
             aria-valuenow="30" 
             aria-valuemin="@Parent.Min" 
             aria-valuemax="@Parent.Max" 
             style="@(_leftHandleStyle+_focusZIndex)" 
             @ref="_leftHandle" 
             @onmousedown="e => OnMouseDownEdge(e, false)"
             @ondblclick="e => OnDoubleClick(1)">@_leftHandleFill
        </div>
        <div tabindex="0" 
             class="ant-multi-range-slider-handle ant-multi-range-slider-handle-2 @_attachedRightHandleClass" 
             role="slider" 
             aria-disabled="@Disabled.ToString()" 
             aria-valuenow="30" 
             aria-valuemin="0" 
             aria-valuemax="100" 
             style="@(_rightHandleStyle+_focusZIndex)" 
             @ref="_rightHandle" 
             @onmousedown="(e) => OnMouseDownEdge(e, true)"
             @ondblclick="e => OnDoubleClick(1)">@_rightHandleFill
        </div>
    }

</div>

@code {
    RenderFragment _locked = @<Icon Type="lock" Theme="outline"/>;
    RenderFragment _unlocked = @<Icon Type="unlock" Theme="outline"/>;

    RenderFragment _rightHandleFill;
    RenderFragment _leftHandleFill;
}